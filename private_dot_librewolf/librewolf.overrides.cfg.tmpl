// Use KDE native dialogs for file pickers and printing dialogs.
// Source: https://wiki.archlinux.org/title/Firefox#XDG_Desktop_Portal_integration
pref("widget.use-xdg-desktop-portal.mime-handler", true);
pref("widget.use-xdg-desktop-portal.file-picker", true);

// Add extensions that should be added to all installations
const extensions = [
	"https://addons.mozilla.org/firefox/downloads/latest/ublock-origin/latest.xpi",
	"https://addons.mozilla.org/firefox/downloads/latest/bitwarden-password-manager/latest.xpi",
	"https://addons.mozilla.org/firefox/downloads/latest/consent-o-matic/latest.xpi",
	"https://addons.mozilla.org/firefox/downloads/latest/torproject-snowflake/latest.xpi",
	"https://addons.mozilla.org/firefox/downloads/latest/refined-github/latest.xpi",
	"https://addons.mozilla.org/firefox/downloads/latest/addy_io/latest.xpi",
	"https://addons.mozilla.org/firefox/downloads/latest/sponsorblock/latest.xpi",

	// Bypass Paywall Firefox Clean
	{{ (output "curl" "-fsSLq" "--max-time" "2" "https://gitlab.com/api/v4/projects/22624144/releases/" | trim | fromJson) | jq ".[0].assets.links[0].url" | first | quote }}
]
pref("browser.policies.runOncePerModification.extensionsInstall", JSON.stringify(extensions))
